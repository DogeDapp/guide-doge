(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"cbu+":function(e,t,r){"use strict";r.r(t),r.d(t,"GeoMapNavigationModule",(function(){return p}));var i=r("mrSG"),n=r("Vbab"),s=r("qsmv"),a=r("tgCk"),o=r("XNiG"),u=r("VRyK"),c=r("xgIS"),h=r("1G5W"),d=r("pLZG"),l=r("ZIGy"),m=r("fXoL");r("DWdG");const{CITY:v}=a.a;let O=(()=>{class e{constructor(e,t){this.host=e,this.elementRef=t,this.tabindex=0,this.destroy$=new o.a}get INSTRUCTIONS(){return Object(n.h)(n.d.INSTRUCTIONS)}get data(){return this.host.data}get unit(){return this.host.unit}set unit(e){this.host.unit=e}get filteringTerritory(){return this.host.filteringTerritory}set filteringTerritory(e){this.host.filteringTerritory=e}get keywordElement(){return this.host.keywordRef.nativeElement}get activeDatumIndex(){return this.host.activeDatumIndex}set activeDatumIndex(e){this.host.activeDatumIndex=e}get activeMeasureIndex(){return this.host.activeMeasureIndex}set activeMeasureIndex(e){this.host.activeMeasureIndex=e}get measureNames(){return this.host.measureNames}get i18nActiveDatumArgs(){const e=this.data[this.activeDatumIndex];if(!e)return null;const t=this.measureNames[this.activeMeasureIndex];return{territory:e.territory.name,value:Object(l.b)(e.values[t]),measure:Object(l.c)(t)}}focus(){this.elementRef.nativeElement.focus()}handleKeyDown(e){var t,r,n,s;return Object(i.a)(this,void 0,void 0,(function*(){const{key:i,shiftKey:a,altKey:o,ctrlKey:u,metaKey:c}=e;if(o||u||c||"Tab"===i)return!1;switch(e.preventDefault(),e.stopPropagation(),i){case"-":case"_":return this.unit=Math.max(this.unit-1,null!==(r=null===(t=this.filteringTerritory)||void 0===t?void 0:t.level)&&void 0!==r?r:0),this.readOutUnitAndFilteringTerritory();case"+":case"=":return this.unit=Math.min(this.unit+1,v),this.readOutUnitAndFilteringTerritory();case"Enter":if(a)this.filteringTerritory=null!==(s=null===(n=this.filteringTerritory)||void 0===n?void 0:n.parent)&&void 0!==s?s:null;else{if(!(this.activeDatumIndex>=0))return this.readOutNothingSelected();this.filteringTerritory=this.data[this.activeDatumIndex].territory}return this.readOutUnitAndFilteringTerritory();case"/":return this.keywordElement.focus(),!0;case"ArrowDown":return this.activeDatumIndex=Math.min(this.activeDatumIndex+1,this.data.length-1),this.readOutActiveDatum();case"ArrowUp":return this.activeDatumIndex=Math.max(this.activeDatumIndex-1,0),this.readOutActiveDatum();case"ArrowRight":return this.activeMeasureIndex=Math.min(this.activeMeasureIndex+1,this.measureNames.length-1),this.readOutActiveMeasure();case"ArrowLeft":return this.activeMeasureIndex=Math.max(this.activeMeasureIndex-1,0),this.readOutActiveMeasure();case"?":return this.readOutInstructions();default:return!1}}))}handleFocus(){return this.readOutUnitAndFilteringTerritory()}handleBlur(){this.activeDatumIndex=-1,this.activeMeasureIndex=-1}ngOnInit(){this.screenReaderComponent.breakSilence(Object(n.i)(n.a.BREAK_SILENCE)),Object(u.a)(this.host.filteringTerritory$.pipe(Object(h.a)(this.destroy$)),Object(c.a)(this.keywordElement,"keydown").pipe(Object(h.a)(this.destroy$)).pipe(Object(d.a)(e=>"Escape"===e.key))).subscribe(()=>{this.focus()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}readOutNothingSelected(){return this.screenReaderComponent.readOut(Object(n.h)(n.d.NOTHING_SELECTED))}readOutUnitAndFilteringTerritory(){const{hierarchicalTerritories:e}=this.host;return this.screenReaderComponent.readOut(Object(n.h)(n.d.UNIT_AND_FILTERING_TERRITORY,{unit:Object(l.d)(this.unit,!0),hierarchical_territories:e.length>0?e.reverse().map(e=>e.name).join(", "):"the world"}))}readOutActiveDatum(){return Object(i.a)(this,void 0,void 0,(function*(){const{i18nActiveDatumArgs:e}=this;return null!==e&&this.screenReaderComponent.readOut(Object(n.h)(n.d.ACTIVE_DATUM,e))}))}readOutActiveMeasure(){return Object(i.a)(this,void 0,void 0,(function*(){const{i18nActiveDatumArgs:e}=this;if(null===e){const e=this.measureNames[this.activeMeasureIndex];return this.screenReaderComponent.readOut(Object(l.c)(e))}return this.screenReaderComponent.readOut(Object(n.h)(n.d.ACTIVE_MEASURE,e))}))}readOutInstructions(){return this.screenReaderComponent.readOut(Object(n.i)(n.d.INSTRUCTIONS))}}return e.\u0275fac=function(t){return new(t||e)(m.Nb("host"),m.Nb(m.l))},e.\u0275cmp=m.Hb({type:e,selectors:[["app-geo-map-navigation"]],viewQuery:function(e,t){var r;1&e&&m.vc(s.a,!0),2&e&&m.nc(r=m.cc())&&(t.screenReaderComponent=r.first)},hostVars:1,hostBindings:function(e,t){1&e&&m.bc("keydown",(function(e){return t.handleKeyDown(e)}))("focus",(function(e){return t.handleFocus(e)}))("blur",(function(e){return t.handleBlur(e)})),2&e&&m.Db("tabindex",t.tabindex)},inputs:{enabled:"enabled"},decls:2,vars:1,consts:[["aria-hidden","true",1,"instructions",3,"innerHTML"]],template:function(e,t){1&e&&(m.Ob(0,"div",0),m.Ob(1,"app-screen-reader")),2&e&&m.lc("innerHTML",t.INSTRUCTIONS,m.qc)},directives:[s.a],styles:["[_nghost-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]:not(:first-child){border-top:1px solid #dadce0}[_nghost-%COMP%]   .instructions[_ngcontent-%COMP%]{font-size:12px;line-height:2em;margin-bottom:.5rem}"]}),e})();var g=r("ofXK"),f=r("gFbo");let p=(()=>{class e{constructor(){this.A11yComponent=O,this.preferenceKey="geoMapNavigation$"}}return e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({factory:function(t){return new(t||e)},imports:[[g.c,f.a]]}),e})()}}]);